import{s as c}from"./supabaseClient-5h-f_Tei.js";import{i as E}from"./roles-BcTnPyVM.js";function i(t,a,o="block"){t&&(t.style.display=a?o:"none")}async function f(t){var g,v;const a=document.getElementById("nav-dashboard"),o=document.getElementById("nav-admin"),l=document.getElementById("nav-login"),r=document.getElementById("nav-register"),e=document.getElementById("nav-logout"),u=document.getElementById("nav-user-email"),d=document.getElementById("nav-divider"),m=document.getElementById("user-email-display"),n=!!t,s=((g=t==null?void 0:t.user)==null?void 0:g.id)||null,p=((v=t==null?void 0:t.user)==null?void 0:v.email)||"";if(i(a,n),i(l,!n),i(r,!n),i(e,n),i(u,n),m&&(m.textContent=n?p:""),d&&d.style.setProperty("display",n?"flex":"none","important"),o){let y=!1;n&&s&&(y=await E(s)),i(o,y)}}async function B({logoutRedirectTo:t="../home/home.html"}={}){const a=document.getElementById("logout-btn"),{data:{session:o},error:l}=await c.auth.getSession();await f(l?null:o),a&&a.addEventListener("click",async e=>{e.preventDefault();const{error:u}=await c.auth.signOut();if(u){alert("Failed to log out.");return}window.location.href=t});const{data:r}=c.auth.onAuthStateChange(async(e,u)=>{await f(u)});return()=>{var e;(e=r==null?void 0:r.subscription)==null||e.unsubscribe()}}export{B as i};
