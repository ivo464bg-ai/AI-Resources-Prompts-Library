import{s as f}from"./supabaseClient-5h-f_Tei.js";import{i as w}from"./auth-C10oIzEU.js";import"./roles-BcTnPyVM.js";document.addEventListener("DOMContentLoaded",async()=>{await w({logoutRedirectTo:"../../index.html"});const c=document.getElementById("authForm"),l=document.getElementById("formTitle"),t=document.getElementById("submitBtn"),i=document.getElementById("toggleModeBtn"),m=document.getElementById("toggleText"),e=document.getElementById("alertArea");let n=!0;function u(){n?(l.textContent="Login",t.textContent="Login",m.textContent="Don't have an account?",i.textContent="Register here"):(l.textContent="Register",t.textContent="Register",m.textContent="Already have an account?",i.textContent="Login here")}new URLSearchParams(window.location.search).get("mode")==="register"&&(n=!1),u();function r(o,a){e.textContent=o,e.className=`alert alert-${a} mt-3`,e.classList.remove("d-none")}function g(){e.classList.add("d-none"),e.textContent=""}i.addEventListener("click",o=>{o.preventDefault(),n=!n,u(),g(),c.reset()}),c.addEventListener("submit",async o=>{o.preventDefault();const a=document.getElementById("email").value,h=document.getElementById("password").value,x=t.textContent;t.disabled=!0,t.textContent="Processing...",g();try{if(n){const{data:d,error:s}=await f.auth.signInWithPassword({email:a,password:h});if(s)throw s;r("Login successful! Redirecting...","success"),setTimeout(()=>{window.location.href="../../index.html"},1e3)}else{const{data:d,error:s}=await f.auth.signUp({email:a,password:h});if(s)throw s;r("Registration successful! Redirecting...","success"),setTimeout(()=>{window.location.href="../../index.html"},1e3)}}catch(d){r(d.message,"danger"),t.disabled=!1,t.textContent=x}})});
